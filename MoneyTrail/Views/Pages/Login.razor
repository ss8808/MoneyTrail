@page "/login"
@using MoneyTrail.Services


<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-5">
    <MudPaper Elevation="4" Class="p-5">
        <MudGrid Justify="Justify.Center">
            <MudItem xs="12" md="8">
                <MudCard>
                    <MudCardHeader>
                        <MudText Typo="Typo.h4" Align="Align.Center">Login</MudText>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudForm @ref="form">
                            <MudTextField Label="Username" @bind-Value="user.Username" Variant="Variant.Filled" Required="true" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Person" Class="mb-3" />
                            <MudTextField Label="Password" @bind-Value="user.PasswordHash" Variant="Variant.Filled" InputType="InputType.Password" Required="true" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Lock" Class="mb-3" />
                            <MudTextField Label="Preferred Currency" @bind-Value="user.PreferredCurrency" Variant="Variant.Filled" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.MonetizationOn" Class="mb-3" />
                            @if (!string.IsNullOrEmpty(ErrorMessage))
                            {
                                <MudAlert Severity="Severity.Error" Dense="true">@ErrorMessage</MudAlert>
                            }
                            <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="HandleLogin" Class="mt-4" FullWidth="true">Login</MudButton>
                        </MudForm>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </MudPaper>
</MudContainer>


